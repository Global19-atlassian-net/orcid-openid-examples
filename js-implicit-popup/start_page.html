<script src="https://code.jquery.com/jquery-2.2.4.js"></script>
<script>
//config
//change to your clientID:
var clientId = "APP-8SEU3HT2XC35A31D"; 
//change to "https://orcid.org/oauth/authorize" for the live service:
var orcidAuthUrl = "https://sandbox.orcid.org/oauth/authorize"; 
//change to the location on your server:
var return_page = "http%3A%2F%2Flocalhost%3A8080%2Forcid_popup.html" 
var url = orcidAuthUrl+"?response_type=token&redirect_uri="+return_page+"&client_id="+clientId+"&scope=openid&nonce=whatever";
var authWindow;

//This opens a popup that hits the ORCID OAuth endpoint
//The endpoint returns to return_page.html, which deocdes the token and returns it to this page
function getORCID(){
  if ($("#orcid").val()){
    return;
  }
  authWindow = window.open(url, 'authWindow');
}

//called on sucessful login
function onOrcidAuth(token){
  console.log(token);
  $("#orcid").val(token.sub);
  if (authWindow){
	  authWindow.close();  	
  }
}

//called if there was a problem logging in.
function onOrcidAuthFail(){
  console.log("failed :(");
  if (authWindow){
	  authWindow.close();  	
  }
}

</script>
<h1>My researcher website</h1>
<p>Please authenticate your ORCID ID so we can associate your professional activities with your ORCID record</p>
<form>
<button onclick="getORCID()">Authenticate your ORCID</button>
<input id="orcid" readonly></input>
</form>
